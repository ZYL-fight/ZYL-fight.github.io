---
layout:     post   				    # 使用的布局（不需要改）
title:      微博项目				# 标题 
subtitle:   进展1                  #副标题
date:       2020-11-30 				# 时间
author:     ZYL 						# 作者
header-img:  img/pcr/180231.png	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 微博项目
    - 爬虫
    - scrapy
---

### 项目进展1
> 时间紧张，就不整理内容了，直接把之前写好的的贴上来

## 近期工作报告

> 张煜林 2020 11 28

	自从上次的组会之后，我在预测分析这一块进行了一些思考，以及最近在推进项目的过程中碰到了一些问题。所以这次特意向学长请教，希望不会太麻烦您。

### 大致技术路线

	上次组会后，参考了刘波老师给我的资料，我最后选择了一种我认为比较好的流行度的量化方式，公式如下：

![image-20201128200942296](https://github.com/ZYL-fight/ZYL-fight.github.io/blob/master/img/blog/2020-11-30-1.png?raw=true)

公式来自知网论文（中文微博客热点话题检测与跟踪技术研究_孙胜平）

根据这个量化公式，对流行度的分析所需要的数据有：微博作者的粉丝数、微博转发次数、评论量、每条评论的评论时间、每个评论者的粉丝数。而目前的数据中，我们缺少微博的每条评论的评论时间和评论者，因此爬虫的爬取逻辑也需要有一定程度的调整。

经过这段时间的摸索确定了以下的爬取策略，此以微博的话题数据为例：

1. 首先确定关键字，并对url进行编码，请求数据，得到跟关键字有关的话题列表，如下图所示。此部分功能已经实现

   ![image-20201128202211670](https://github.com/ZYL-fight/ZYL-fight.github.io/blob/master/img/blog/2020-11-30-2.png?raw=true)

2. 获得每个话题的详情界面url，想法是在这个话题下爬取所有的微博及其转发微博，和微博的评论。此部分实现思路已经想好。

![](https://github.com/ZYL-fight/ZYL-fight.github.io/blob/master/img/blog/2020-11-30-3.png?raw=true)

### 碰到的问题

在上述技术路线的第二步，实现的方法早已明确了，但是迟迟没有动手。其原因是在一个话题下，能获取的微博数量是有限的。

例如：https://m.weibo.cn/api/container/getIndex?containerid=231522type%3D1%26q%3D%23%E4%B8%AD%E5%9B%BD%23%26t%3D10&isnewpage=1&luicode=10000011&lfid=100103type%3D38%26amp%3Bq%3D%E4%B8%AD%E5%9B%BD%26amp%3Bt%3D0&page_type=searchall&page=1

我可以通过更改url最后的page参数获得更多数据，但是这个翻页实际上是有限的。这是一个阻碍我的地方。

第二点是，在这个话题的详情界面是有综合、实时、热门三个可选标签的。这三个标签返回的微博并不是完全一致的，比如说微博A出现在了热门里，但是发布时间十分久远，于是并没有出现在实时标签中；而实时的微博可能由于热度不高，并没有出现在热门标签中。所以我并不是很清楚应该爬取那个标签下的数据。如果爬取三个标签下的微博取并集，大部分微博可能会被重复爬取，这个时间的利用率上会不会太低了？

第三点是，对于一条微博，它存在发帖人主动删评论、微博平台只展示部分评论的情况。这样的话采集数据并不全面，这会不会对流行度的量化有较大影响呢？

第四点是，由于需要预测一个话题的流行度，那么训练的模型的数据的基本单位也应该是一个话题的数据。那么一个话题至少是万级的微博数据和评论数据。如果训练模型的话，那么需要很多的话题数据，这个需要采集的数据量可以说是非常的庞大，所以想请教一下，我至少需要多少个话题数据，才能让训练出的模型有一定的可靠程度？

### 总结

现阶段工作情况是：确定了流行度量化方法，摸清了数据获取的整个流程，并实现了一部分步骤。

而阻碍我推进工作的是，碰到了上述四个问题，还请学长指教。当然上述步骤如有不妥之处也请学长斧正。



## Re_张煜林

![image-20201130232102019](https://github.com/ZYL-fight/ZYL-fight.github.io/blob/master/img/blog/2020-11-30-4.png?raw=true)